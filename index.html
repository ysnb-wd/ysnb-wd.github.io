<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>完整卡网界面（含付款页）</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; transition: background .3s, color .3s; }
        /* 基础样式 */
        body { background-color: #f5f5f5; padding: 15px; color: #333; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .search-bar { width: 80%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; background: white; }
        .theme-btn { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; }
        .category { display: flex; gap: 10px; margin: 15px 0; overflow-x: auto; padding-bottom: 5px; }
        .category-btn { padding: 8px 15px; background: white; border: 1px solid #ddd; border-radius: 20px; font-size: 14px; white-space: nowrap; cursor: pointer; }
        .category-btn.active { background: #007bff; color: white; border-color: #007bff; }
        .card-list { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 60px; }
        .card { background: white; border-radius: 10px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; }
        .card-img { width: 100%; height: 100px; background: #eee; border-radius: 8px; margin-bottom: 10px; }
        .card-title { font-size: 15px; font-weight: 600; margin-bottom: 5px; }
        .card-price { color: #ff4400; font-weight: bold; font-size: 16px; margin-bottom: 8px; }
        .add-cart { width: 100%; padding: 8px 0; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; }
        
        /* 弹窗通用样式 */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 100; }
        .modal-content { width: 90%; background: white; border-radius: 10px; padding: 20px; max-height: 80vh; overflow-y: auto; }
        .close-modal { position: absolute; top: 15px; right: 15px; font-size: 24px; cursor: pointer; color: white; }
        
        /* 详情弹窗 */
        .detail-img { width: 100%; height: 180px; background: #eee; border-radius: 8px; margin-bottom: 15px; }
        .detail-desc { margin: 10px 0; line-height: 1.5; font-size: 14px; }
        
        /* 购物车弹窗 */
        .cart-modal .modal-content { padding-bottom: 60px; }
        .cart-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
        .cart-total { margin-top: 15px; text-align: right; font-size: 16px; font-weight: 600; }
        .checkout-btn { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 80%; padding: 12px 0; background: #ff4400; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; }
        
        /* 付款界面（已修改为同级目录路径） */
        .pay-modal h3 { text-align: center; margin-bottom: 20px; }
        .pay-code-container { width: 80%; margin: 0 auto; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
        /* 关键修改：路径为HTML同级目录下的pay-code.jpg */
        .pay-code-img { width: 100%; height: auto; border-radius: 8px; background: #f8f8f8 url('pay-code.jpg') center/contain no-repeat; min-height: 250px; }
        .pay-note { margin-top: 15px; font-size: 14px; color: #666; line-height: 1.5; }
        .confirm-pay-btn { width: 100%; margin-top: 20px; padding: 12px 0; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; }
        
        /* 底部购物车栏 */
        .cart-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 -2px 5px rgba(0,0,0,0.1); z-index: 90; cursor: pointer; }
        .cart-count { background: #ff4400; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 12px; position: relative; top: -10px; left: -5px; }
        .cart-btn { padding: 8px 20px; background: #ff4400; color: white; border: none; border-radius: 6px; cursor: pointer; }
        
        /* 深色模式适配 */
        body.dark { background-color: #1a1a1a; color: #eee; }
        body.dark .search-bar, body.dark .theme-btn, body.dark .category-btn, body.dark .card, body.dark .modal-content, body.dark .cart-bar, body.dark .pay-code-container { background: #2d2d2d; border-color: #444; }
        body.dark .category-btn.active { background: #0095ff; }
        body.dark .cart-item { border-bottom-color: #444; }
        body.dark .pay-note { color: #bbb; }
        body.dark .pay-code-img { background-color: #333; }
    </style>
</head>
<body>
    <!-- 顶部栏 -->
    <div class="header">
        <input type="text" class="search-bar" placeholder="搜索卡片...">
        <button class="theme-btn" id="themeBtn">深色模式</button>
    </div>

    <!-- 分类栏 -->
    <div class="category">
        <button class="category-btn active">全部</button>
        <button class="category-btn">游戏</button>
        <button class="category-btn">影视</button>
        <button class="category-btn">会员</button>
        <button class="category-btn">其他</button>
    </div>

    <!-- 卡片列表 -->
    <div class="card-list" id="cardList">
        <div class="card" data-id="1" data-title="某游戏月卡" data-price="25.8" data-desc="包含30天游戏会员权益，每日可领100钻石+专属道具，支持所有服务器兑换。">
            <div class="card-img"></div>
            <div class="card-title">某游戏月卡</div>
            <div class="card-price">¥25.8</div>
            <button class="add-cart">加入购物车</button>
        </div>
        <div class="card" data-id="2" data-title="视频平台年卡" data-price="99.0" data-desc="全年无广告观看，支持4K画质，可同时登录3台设备，包含专属超前点播权益。">
            <div class="card-img"></div>
            <div class="card-title">视频平台年卡</div>
            <div class="card-price">¥99.0</div>
            <button class="add-cart">加入购物车</button>
        </div>
        <div class="card" data-id="3" data-title="音乐会员季卡" data-price="35.5" data-desc="3个月无损音质收听，免费下载歌曲，包含付费曲库全解锁+MV高清观看权益。">
            <div class="card-img"></div>
            <div class="card-title">音乐会员季卡</div>
            <div class="card-price">¥35.5</div>
            <button class="add-cart">加入购物车</button>
        </div>
        <div class="card" data-id="4" data-title="云盘扩容卡" data-price="49.9" data-desc="永久扩容100GB云存储空间，支持文件极速上传/下载，享专属客服通道。">
            <div class="card-img"></div>
            <div class="card-title">云盘扩容卡</div>
            <div class="card-price">¥49.9</div>
            <button class="add-cart">加入购物车</button>
        </div>
    </div>

    <!-- 详情弹窗 -->
    <div class="modal detail-modal" id="detailModal">
        <span class="close-modal" id="closeDetailModal">&times;</span>
        <div class="modal-content">
            <div class="detail-img"></div>
            <h3 id="detailTitle"></h3>
            <p class="card-price" id="detailPrice"></p>
            <p class="detail-desc" id="detailDesc"></p>
            <button class="add-cart" style="margin-top: 15px;" id="detailAddCart">加入购物车</button>
        </div>
    </div>

    <!-- 购物车弹窗 -->
    <div class="modal cart-modal" id="cartModal">
        <span class="close-modal" id="closeCartModal">&times;</span>
        <div class="modal-content">
            <h3>我的购物车</h3>
            <div id="cartItemList"><!-- 购物车商品动态生成 --></div>
            <div class="cart-total" id="cartTotal">总计：¥0.00</div>
            <button class="checkout-btn" id="checkoutBtn">去付款</button>
        </div>
    </div>

    <!-- 付款界面弹窗 -->
    <div class="modal pay-modal" id="payModal">
        <span class="close-modal" id="closePayModal">&times;</span>
        <div class="modal-content">
            <h3>请完成付款</h3>
            <div class="pay-code-container">
                <p>扫码付款（支持微信/支付宝）</p>
                <!-- 付款码区域：读取同级目录的pay-code.jpg -->
                <div class="pay-code-img"></div>
            </div>
            <div class="pay-note">
                1. 付款时请备注订单号<br>
                2. 付款后系统将自动发放卡片<br>
                3. 若未到账请联系客服
            </div>
            <button class="confirm-pay-btn" id="confirmPayBtn">确认已付款</button>
        </div>
    </div>

    <!-- 底部购物车栏 -->
    <div class="cart-bar" id="cartBar">
        <div>
            购物车 <span class="cart-count" id="cartCount">0</span>
        </div>
        <button class="cart-btn" id="openCartBtn">去结算</button>
    </div>

    <script>
        // 全局数据：购物车商品列表
        let cartItems = [];
        // DOM元素获取
        const themeBtn = document.getElementById('themeBtn');
        const cardList = document.getElementById('cardList');
        const cartCountEl = document.getElementById('cartCount');
        const cartBar = document.getElementById('cartBar');
        const openCartBtn = document.getElementById('openCartBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCartModal = document.getElementById('closeCartModal');
        const cartItemList = document.getElementById('cartItemList');
        const cartTotal = document.getElementById('cartTotal');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const payModal = document.getElementById('payModal');
        const closePayModal = document.getElementById('closePayModal');
        const confirmPayBtn = document.getElementById('confirmPayBtn');
        const detailModal = document.getElementById('detailModal');
        const closeDetailModal = document.getElementById('closeDetailModal');
        const detailTitle = document.getElementById('detailTitle');
        const detailPrice = document.getElementById('detailPrice');
        const detailDesc = document.getElementById('detailDesc');
        const detailAddCart = document.g
