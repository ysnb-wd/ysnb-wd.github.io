<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统控制中心</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #f5f7fa; min-height: 100vh; display: flex; flex-direction: column; }
        .header { background: #2c3e50; color: white; padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .header h1 { font-size: 18px; font-weight: 600; }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-role { font-size: 13px; opacity: 0.9; }
        .logout-btn { padding: 6px 12px; background: #e74c3c; color: white; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; }

        /* 核心：Index控制开关（只保留关键样式） */
        .index-switch { margin: 15px 25px; display: flex; gap: 8px; }
        .switch-btn { padding: 7px 18px; border: 1px solid #3498db; border-radius: 4px; background: white; color: #3498db; cursor: pointer; font-size: 14px; }
        .switch-btn.active { background: #3498db; color: white; }
        .switch-tip { margin: 0 25px 15px; color: #666; font-size: 12px; }

        /* 精简主体：只保留左侧菜单+右侧提示 */
        .main-container { display: flex; flex: 1; }
        .sidebar { width: 200px; background: white; box-shadow: 2px 0 3px rgba(0,0,0,0.03); padding: 20px 0; height: calc(100vh - 100px); position: sticky; top: 80px; }
        .menu-title { padding: 0 20px 10px; font-size: 12px; color: #95a5a6; text-transform: uppercase; }
        .menu-list { list-style: none; }
        .menu-link { display: flex; align-items: center; padding: 10px 20px; color: #3498db; text-decoration: none; font-size: 14px; }
        .menu-link.active { background: #f1f5f9; border-left: 3px solid #3498db; }
        .menu-link i { margin-right: 10px; font-size: 15px; }

        .content { flex: 1; padding: 0 25px 25px; }
        .page-title { font-size: 16px; color: #2c3e50; margin-bottom: 20px; }
        .tip-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .tip-card p { color: #34495e; font-size: 14px; line-height: 1.5; margin-bottom: 8px; }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="header">
        <h1>控制中心</h1>
        <div class="user-info">
            <span id="userRole" class="user-role"></span>
            <button class="logout-btn" id="logoutBtn">退出</button>
        </div>
    </div>

    <!-- 核心：Index显示控制开关（“关”=index显文本，“开”=index显卡网） -->
    <div class="index-switch">
        <button class="switch-btn" id="switchShowCard">开（Index显卡网）</button>
        <button class="switch-btn active" id="switchShowText">关（Index显文本）</button>
    </div>
    <p class="switch-tip">提示：切换后打开index.html立即生效 | 文本内容：林然攻击我的服务器了，正在讨伐中</p>

    <div class="main-container">
        <div class="sidebar">
            <div class="menu-title">功能</div>
            <ul class="menu-list">
                <li><a href="#dashboard" class="menu-link active"><<<i class="fa fa-tachometer"></</</i>控制台</a></li>
                <li><a href="#index-control" class="menu-link"><<<i class="fa fa-home"></</</i>Index控制</a></li>
            </ul>
        </div>
        <div class="content">
            <h2 class="page-title">操作指引</h2>
            <div class="tip-card">
                <p>1. 点击顶部开关设置index显示模式；</p>
                <p>2. 所有打开此浏览器的用户，访问index都会按当前模式显示；</p>
                <p>3. 退出登录不影响开关状态。</p>
            </div>
        </div>
    </div>

    <script>
        // 未登录跳登录页（精简判断）
        const isLogin = localStorage.getItem('isLogin');
        const userInfo = JSON.parse(localStorage.getItem('userInfo'));
        if (!isLogin || isLogin !== 'true' || !userInfo) window.location.href = 'login.html';

        // 1. 显示用户身份（精简）
        document.getElementById('userRole').textContent = `${userInfo.role}（${userInfo.username}）`;

        // 2. 退出登录
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('isLogin');
            localStorage.removeItem('userInfo');
            localStorage.removeItem('savedUser');
            window.location.href = 'login.html';
        });

        // 3. 核心：开关逻辑（存储状态到localStorage，控制index显示）
        const switchShowCard = document.getElementById('switchShowCard');
        const switchShowText = document.getElementById('switchShowText');

        // 初始化开关状态（默认“关”=显文本）
        if (localStorage.getItem('indexMode') === 'showCard') switchShowCard.classList.add('active'), switchShowText.classList.remove('active');

        // 点击“开”=index显卡网
        switchShowCard.addEventListener('click', () => {
            switchShowCard.classList.add('active');
            switchShowText.classList.remove('active');
            localStorage.setItem('indexMode', 'showCard');
        });

        // 点击“关”=index显文本（核心需求）
        switchShowText.addEventListener('click', () => {
            switchShowText.classList.add('active');
            switchShowCard.classList.remove('active');
            localStorage.setItem('indexMode', 'showText');
        });

        // 4. 菜单高亮（精简）
        document.querySelectorAll('.menu-link').forEach(link => {
            link.addEventListener('click', (e) => {
                document.querySelectorAll('.menu-link').forEach(item => item.classList.remove('active'));
                e.target.closest('.menu-link').classList.add('active');
            });
        });
    </script>
</body>
</html>
